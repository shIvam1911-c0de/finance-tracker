import{r as c,u as v,e as N,c as o,j as e}from"./index-DeXpUch5.js";import{f as w,C}from"./CurrencySelector-BUTVcRwZ.js";const d=[{value:"bank",label:"Bank Account",icon:"ðŸ¦"},{value:"credit_card",label:"Credit Card",icon:"ðŸ’³"},{value:"cash",label:"Cash",icon:"ðŸ’µ"},{value:"investment",label:"Investment",icon:"ðŸ“ˆ"}],A=()=>{const[u,m]=c.useState([]),[g,h]=c.useState(!0),[b,i]=c.useState(!1),{canModify:x}=v(),{isDark:a}=N(),[s,n]=c.useState({name:"",type:"bank",currency:"USD",balance:"0"}),l=c.useCallback(async()=>{try{const t=await o.get("/accounts");m(t.data)}catch(t){console.error("Failed to fetch accounts:",t)}finally{h(!1)}},[]);c.useEffect(()=>{l()},[l]);const y=async t=>{t.preventDefault();try{await o.post("/accounts",s),i(!1),n({name:"",type:"bank",currency:"USD",balance:"0"}),l()}catch(r){console.error("Failed to create account:",r)}},f=async t=>{if(window.confirm("Delete this account? This action cannot be undone."))try{await o.delete(`/accounts/${t}`),l()}catch(r){console.error("Failed to delete account:",r),alert(r.response?.data?.error||"Failed to delete account")}},j=t=>d.find(r=>r.value===t)?.icon||"ðŸ’¼",p=t=>d.find(r=>r.value===t)?.label||t;return g?e.jsx("div",{className:a?"text-white":"text-gray-900",children:"Loading accounts..."}):e.jsxs("div",{className:`p-6 ${a?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:`text-3xl font-bold ${a?"text-white":"text-gray-900"}`,children:"Multi-Currency Accounts"}),x()&&e.jsx("button",{onClick:()=>i(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Add Account"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(t=>e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:j(t.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${a?"text-white":"text-gray-900"}`,children:t.name}),e.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:p(t.type)})]})]}),x()&&e.jsx("button",{onClick:()=>f(t.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Balance:"}),e.jsx("span",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:w(t.balance,t.currency)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Currency:"}),e.jsx("span",{className:`font-medium ${a?"text-white":"text-gray-900"}`,children:t.currency})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Active":"Inactive"})]})]})]},t.id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-6 w-96`,children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${a?"text-white":"text-gray-900"}`,children:"Add New Account"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Account Name"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>n({...s,name:t.target.value}),className:`w-full border rounded px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"e.g., Main Checking Account",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Account Type"}),e.jsx("select",{value:s.type,onChange:t=>n({...s,type:t.target.value}),className:`w-full border rounded px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:d.map(t=>e.jsxs("option",{value:t.value,children:[t.icon," ",t.label]},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Currency"}),e.jsx(C,{value:s.currency,onChange:t=>n({...s,currency:t}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Initial Balance"}),e.jsx("input",{type:"number",step:"0.01",value:s.balance,onChange:t=>n({...s,balance:t.target.value}),className:`w-full border rounded px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded",children:"Create Account"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 rounded",children:"Cancel"})]})]})]})})]})},S=()=>e.jsx(A,{});export{S as default};
