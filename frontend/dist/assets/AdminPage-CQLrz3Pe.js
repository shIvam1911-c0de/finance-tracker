import{r as n,u as c,e as g,c as x,j as e}from"./index-DeXpUch5.js";const u=()=>{const[r,o]=n.useState([]),[h,m]=n.useState(!0),{hasRole:l}=c(),{isDark:s}=g();n.useEffect(()=>{l("admin")&&d()},[l]);const d=async()=>{try{const t=await x.get("/users");o(t.data)}catch(t){console.error("Failed to fetch users:",t)}finally{m(!1)}},p=async(t,a)=>{try{await x.put(`/users/${t}/role`,{role:a}),d()}catch(i){console.error("Failed to update role:",i)}},y=async(t,a)=>{if(window.confirm(`Delete user "${a}"? This action cannot be undone.`))try{await x.delete(`/users/${t}`),d()}catch(i){console.error("Failed to delete user:",i),alert("Failed to delete user")}};return l("admin")?h?e.jsx("div",{className:s?"text-white":"text-gray-900",children:"Loading users..."}):e.jsxs("div",{className:`p-6 ${s?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsx("h1",{className:`text-3xl font-bold mb-6 ${s?"text-white":"text-gray-900"}`,children:"Admin Panel"}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow overflow-hidden`,children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s?"text-gray-300":"text-gray-500"}`,children:"ID"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s?"text-gray-300":"text-gray-500"}`,children:"Username"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s?"text-gray-300":"text-gray-500"}`,children:"Email"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s?"text-gray-300":"text-gray-500"}`,children:"Role"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase ${s?"text-gray-300":"text-gray-500"}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-600":"divide-gray-200"}`,children:r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${s?"text-white":"text-gray-900"}`,children:t.id}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${s?"text-white":"text-gray-900"}`,children:t.username}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${s?"text-white":"text-gray-900"}`,children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.role==="admin"?"bg-red-100 text-red-800":t.role==="user"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:t.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:t.role,onChange:a=>p(t.id,a.target.value),className:`border rounded px-2 py-1 ${s?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"read-only",children:"Read Only"})]}),e.jsx("button",{onClick:()=>y(t.id,t.username),className:`px-3 py-1 text-sm rounded transition-colors ${s?"bg-red-600 hover:bg-red-700 text-white":"bg-red-100 hover:bg-red-200 text-red-700"}`,children:"Delete"})]})})]},t.id))})]})})]}):e.jsx("div",{className:"text-red-500",children:"Access Denied: Admin Only"})},f=()=>{const{isAdmin:r}=c();return r()?e.jsx(u,{}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Admin access required"})]})};export{f as default};
