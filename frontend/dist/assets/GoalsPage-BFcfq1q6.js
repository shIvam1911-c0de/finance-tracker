import{r as n,u as v,e as w,c,j as e}from"./index-DeXpUch5.js";import{f as g,C as N}from"./CurrencySelector-BUTVcRwZ.js";const $=()=>{const[x,m]=n.useState([]),[u,h]=n.useState(!0),[y,d]=n.useState(!1),{canModify:o}=v(),{isDark:r}=w(),[a,l]=n.useState({title:"",description:"",target_amount:"",current_amount:"0",currency:"USD",target_date:"",category:""}),i=n.useCallback(async()=>{try{const t=await c.get("/goals");m(t.data)}catch(t){console.error("Failed to fetch goals:",t)}finally{h(!1)}},[]);n.useEffect(()=>{i()},[i]);const b=async t=>{t.preventDefault();try{await c.post("/goals",a),d(!1),l({title:"",description:"",target_amount:"",current_amount:"0",currency:"USD",target_date:"",category:""}),i()}catch(s){console.error("Failed to create goal:",s)}},p=async(t,s)=>{try{await c.put(`/goals/${t}/progress`,{amount:parseFloat(s)}),i()}catch(j){console.error("Failed to update progress:",j)}},f=async t=>{if(window.confirm("Delete this goal?"))try{await c.delete(`/goals/${t}`),i()}catch(s){console.error("Failed to delete goal:",s)}};return u?e.jsx("div",{className:r?"text-white":"text-gray-900",children:"Loading goals..."}):e.jsxs("div",{className:`p-6 ${r?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:`text-3xl font-bold ${r?"text-white":"text-gray-900"}`,children:"ðŸŽ¯ Financial Goals"}),o()&&e.jsx("button",{onClick:()=>d(!0),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg",children:"Add Goal"})]}),e.jsx("div",{className:"grid gap-6",children:x.map(t=>e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-xl font-semibold ${r?"text-white":"text-gray-900"}`,children:t.title}),t.description&&e.jsx("p",{className:`mt-1 ${r?"text-gray-300":"text-gray-600"}`,children:t.description}),e.jsxs("p",{className:`text-sm mt-2 ${r?"text-gray-400":"text-gray-500"}`,children:["Category: ",t.category," â€¢ Target: ",t.target_date?new Date(t.target_date).toLocaleDateString():"No deadline"]})]}),t.is_achieved&&e.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"âœ… Achieved"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Number(t.progress_percentage||0).toFixed(1),"%"]})]}),e.jsx("div",{className:`w-full ${r?"bg-gray-600":"bg-gray-200"} rounded-full h-3`,children:e.jsx("div",{className:`h-3 rounded-full ${t.is_achieved?"bg-green-500":Number(t.progress_percentage||0)>75?"bg-blue-500":"bg-gray-400"}`,style:{width:`${Math.min(Number(t.progress_percentage||0),100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{children:g(t.current_amount,t.currency)}),e.jsx("span",{children:g(t.target_amount,t.currency)})]})]}),o()&&!t.is_achieved&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",step:"0.01",placeholder:"Add amount",className:`flex-1 border rounded px-3 py-2 text-sm ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,onKeyPress:s=>{s.key==="Enter"&&(p(t.id,s.target.value),s.target.value="")}}),e.jsx("button",{onClick:()=>f(t.id),className:"text-red-600 hover:text-red-800 px-3 py-2 text-sm",children:"Delete"})]})]},t.id))}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-lg p-6 w-96 max-h-[90vh] overflow-y-auto`,children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${r?"text-white":"text-gray-900"}`,children:"Add Financial Goal"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Goal Title"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>l({...a,title:t.target.value}),className:`w-full border rounded px-3 py-2 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"e.g., Emergency Fund",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>l({...a,description:t.target.value}),className:`w-full border rounded px-3 py-2 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,rows:"2",placeholder:"Optional description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Target Amount"}),e.jsx("input",{type:"number",step:"0.01",value:a.target_amount,onChange:t=>l({...a,target_amount:t.target.value}),className:`w-full border rounded px-3 py-2 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Currency"}),e.jsx(N,{value:a.currency,onChange:t=>l({...a,currency:t}),className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Category"}),e.jsx("input",{type:"text",value:a.category,onChange:t=>l({...a,category:t.target.value}),className:`w-full border rounded px-3 py-2 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"e.g., Savings, Investment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${r?"text-gray-300":"text-gray-700"}`,children:"Target Date (Optional)"}),e.jsx("input",{type:"date",value:a.target_date,onChange:t=>l({...a,target_date:t.target.value}),className:`w-full border rounded px-3 py-2 ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-2 rounded",children:"Create Goal"}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 rounded",children:"Cancel"})]})]})]})})]})},k=()=>e.jsx($,{});export{k as default};
