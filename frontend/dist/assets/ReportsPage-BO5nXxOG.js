import{e as b,r as i,c as m,j as e}from"./index-DeXpUch5.js";import{C as j,f as c}from"./CurrencySelector-BUTVcRwZ.js";const N=()=>{const{isDark:a}=b(),[r,h]=i.useState(null),[o,g]=i.useState(!1),[l,y]=i.useState("financial"),[s,x]=i.useState({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],currency:"USD",year:new Date().getFullYear()}),p=i.useCallback(async()=>{g(!0);try{let t="",n={};switch(l){case"financial":t="/reports/financial",n={startDate:s.startDate,endDate:s.endDate,currency:s.currency};break;case"tax":t="/reports/tax",n={year:s.year,currency:s.currency};break;case"budget":t="/reports/budget";break;default:return}const d=await m.get(t,{params:n});h(d.data)}catch(t){console.error("Failed to generate report:",t)}finally{g(!1)}},[l,s]),u=async()=>{try{const t=await m.get("/reports/financial",{params:{...s,format:"csv"},responseType:"blob"}),n=window.URL.createObjectURL(new Blob([t.data])),d=document.createElement("a");d.href=n,d.setAttribute("download",`financial-report-${s.startDate}-${s.endDate}.csv`),document.body.appendChild(d),d.click(),d.remove()}catch(t){console.error("Failed to download CSV:",t)}};return e.jsxs("div",{className:`p-6 ${a?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[e.jsx("h1",{className:`text-3xl font-bold mb-6 ${a?"text-white":"text-gray-900"}`,children:"ðŸ“Š Advanced Reports"}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow p-6 mb-6`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Report Type"}),e.jsxs("select",{value:l,onChange:t=>y(t.target.value),className:`w-full border rounded px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"financial",children:"Financial Report"}),e.jsx("option",{value:"tax",children:"Tax Report"}),e.jsx("option",{value:"budget",children:"Budget Report"})]})]}),l==="financial"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Start Date"}),e.jsx("input",{type:"date",value:s.startDate,onChange:t=>x({...s,startDate:t.target.value}),className:`w-full border rounded px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"End Date"}),e.jsx("input",{type:"date",value:s.endDate,onChange:t=>x({...s,endDate:t.target.value}),className:`w-full border rounded px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]}),l==="tax"&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Year"}),e.jsx("input",{type:"number",value:s.year,onChange:t=>x({...s,year:parseInt(t.target.value)}),className:`w-full border rounded px-3 py-2 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,min:"2020",max:new Date().getFullYear()})]}),(l==="financial"||l==="tax")&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"Currency"}),e.jsx(j,{value:s.currency,onChange:t=>x({...s,currency:t}),className:"w-full"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,disabled:o,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",children:o?"Generating...":"Generate Report"}),l==="financial"&&r&&e.jsx("button",{onClick:u,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:"Download CSV"})]})]}),r&&e.jsxs("div",{className:"space-y-6",children:[l==="financial"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[e.jsx("h3",{className:`text-xl font-bold mb-4 ${a?"text-white":"text-gray-900"}`,children:"Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c(r.summary.totalIncome,s.currency)}),e.jsx("p",{className:a?"text-gray-300":"text-gray-600",children:"Total Income"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c(r.summary.totalExpenses,s.currency)}),e.jsx("p",{className:a?"text-gray-300":"text-gray-600",children:"Total Expenses"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-2xl font-bold ${r.summary.netIncome>=0?"text-green-600":"text-red-600"}`,children:c(r.summary.netIncome,s.currency)}),e.jsx("p",{className:a?"text-gray-300":"text-gray-600",children:"Net Income"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.summary.transactionCount}),e.jsx("p",{className:a?"text-gray-300":"text-gray-600",children:"Transactions"})]})]})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow p-6`,children:[e.jsx("h3",{className:`text-xl font-bold mb-4 ${a?"text-white":"text-gray-900"}`,children:"Category Breakdown"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b ${a?"border-gray-600":"border-gray-200"}`,children:[e.jsx("th",{className:`text-left py-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Category"}),e.jsx("th",{className:`text-left py-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Type"}),e.jsx("th",{className:`text-right py-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Amount"}),e.jsx("th",{className:`text-right py-2 ${a?"text-gray-300":"text-gray-700"}`,children:"Count"})]})}),e.jsx("tbody",{children:r.categoryBreakdown.map((t,n)=>e.jsxs("tr",{className:`border-b ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsx("td",{className:`py-2 ${a?"text-white":"text-gray-900"}`,children:t.category}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${t.type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.type})}),e.jsx("td",{className:`text-right py-2 ${a?"text-white":"text-gray-900"}`,children:c(t.total,s.currency)}),e.jsx("td",{className:`text-right py-2 ${a?"text-white":"text-gray-900"}`,children:t.count})]},n))})]})})]})]}),l==="tax"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Tax Report - ",r.year]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c(r.summary.total_income,s.currency)}),e.jsx("p",{className:"text-gray-600",children:"Total Income"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c(r.summary.total_expenses,s.currency)}),e.jsx("p",{className:"text-gray-600",children:"Total Expenses"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Category"}),e.jsx("th",{className:"text-right py-2",children:"Income"}),e.jsx("th",{className:"text-right py-2",children:"Expenses"}),e.jsx("th",{className:"text-right py-2",children:"Transactions"})]})}),e.jsx("tbody",{children:r.categories.map((t,n)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2",children:t.category}),e.jsx("td",{className:"text-right py-2",children:c(t.income,s.currency)}),e.jsx("td",{className:"text-right py-2",children:c(t.expenses,s.currency)}),e.jsx("td",{className:"text-right py-2",children:t.transaction_count})]},n))})]})})]}),l==="budget"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Budget Performance"}),e.jsx("div",{className:"space-y-4",children:r.budgets.map((t,n)=>e.jsxs("div",{className:"border rounded p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-semibold",children:t.category}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${t.status==="Over Budget"?"bg-red-100 text-red-800":t.status==="Near Limit"?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:t.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Budget:"}),e.jsx("span",{className:"ml-2 font-medium",children:c(t.budget_amount,t.currency)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Spent:"}),e.jsx("span",{className:"ml-2 font-medium",children:c(t.actual_spent,t.currency)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Usage:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[t.usage_percentage.toFixed(1),"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:`h-2 rounded-full ${t.usage_percentage>100?"bg-red-500":t.usage_percentage>80?"bg-orange-500":"bg-green-500"}`,style:{width:`${Math.min(t.usage_percentage,100)}%`}})})]},n))})]})]})]})},v=()=>e.jsx(N,{});export{v as default};
